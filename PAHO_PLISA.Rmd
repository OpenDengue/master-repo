---
title: "PAHO PLISA cumulative to incident"
author: "Joe Clarke & Ahyoung Lim \n"
date: "Last update on `r format(Sys.Date(), '%B %d, %Y')`"
output: 
    #github_document: default
    html_document:
        #theme: flatly
        number_sections: true
        toc: true
        toc_float: true
        output_dir: "../docs/"

---

# Background
## Aim
From cumulative to incident case counts in the [PAHO PLISA Health Information Platform for the Americas dengue database](https://www3.paho.org/data/index.php/en/mnu-topics/indicadores-dengue-en/dengue-nacional-en/252-dengue-pais-ano-en.html)  

## Objectives 
1. Clean, process and transform 53 downloaded PAHO weekly cumulative datasets for all countries into one dataframe.  
2. Summarise the data coverage for each country (admin 0 level) in the cumulative "total of dengue cases" table.  
3. Summarise the data coverage for each country (admin 0 level) in the incident "suspected dengue cases" (Non-severe cases by epidemiological week) table.  
4. Investigate how the data coverage varies according to burden of dengue disease.  
5. Develop methods to convert cumulative to incident case counts, accounting for gaps in data coverage.

## Rationale
It is important to note that the cumulative datasets are for reports of "all dengue cases : suspected, probable, confirmed, non-severe and severe cases, and deaths. probable dengue cases : person who has a fever or history of fever for 2-7 days duration, two or more symptoms of dengue and one serological test positive or epidemiological nexus with confirmed dengue case 14 days before onset of symtpoms".  

This dataset, while it has "select epidemiological week" slider options for all available epidemiological weeks of every yer, the epidemiological week for which information is actually available/reported can differ from that on the slider. Some countries have missing weeks of data.The the extent of missing data varies greatly between countries, and over time. While moving from cumulative to incident weekly counts for countries with 100% reporting of sequential cumulative counts may be straightforward, by subtracting the previous weeks count from the following weeks count, this is not so for countries with missing data. There is already incident data available through the "Chart" and "Epi Curve" options, however this is for non-severe cases of dengue only. This is not the same as "total of dengue cases" as measured in the cumulative table, which is our priority for this dataset.  

We want to investigate if this incident dataset can be leveraged to gap-fill the cumulative dataset when moving to incident counts, and what the difference between the two is. 

```{r setup, include=FALSE}
require("knitr")
require("here")
require("pacman")
require("formatR")

knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, fig.path = here("/docs/figure/PAHO/"))
knitr::opts_knit$set(root.dir = here())
pacman::p_load("dplyr", "lubridate",  "tidyr", "tidyverse",  "knitr", "stringi", "zoo", "EpiWeek", "data.table")

```

# Data preprocessing

```{r child = 'docs/markdown/PAHO_PLISA/01_data_processing.Rmd'}

```

<!-- # Priority setting -->

<!--{r child = 'markdown/sections/02_priority_setting.Rmd', include=FALSE} -->


<!-- # Data revision and imputation (for selected countries) -->

<!--r child = 'markdown/sections/03_filling_gaps.Rmd', include=FALSE} -->


# Data revision and imputation 

```{r child = 'docs/markdown/PAHO_PLISA/04_data_revision_imputation.Rmd'}

```


<!--
# Visualisations
```{r child = 'docs/markdown/PAHO_PLISA/05_visual.Rmd', echo=FALSE}```
-->
